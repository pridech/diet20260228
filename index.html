<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2025餐厅评价年度报告</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: "WPS灵秀黑", "微软雅黑", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            overflow: hidden;
            background: #000;
        }
        /* 播放触发蒙层 - 初始全屏显示 */
        #playOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: #fff;
            font-size: 1.6em;
            text-align: center;
            pointer-events: auto;
        }
        .page-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        section {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.8s ease;
            z-index: 0;
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        section.active {
            opacity: 1;
            z-index: 10;
        }
        .video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0; /* 初始透明，播放后显示 */
            transition: opacity 0.5s ease;
        }
        .video-bg.played {
            opacity: 1; /* 播放后显示背景 */
        }
        .page-content {
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        /* 字体样式层级 */
        .text-large { font-size: 2.8em; font-weight: 700; }
        .text-medium-large { font-size: 2.2em; font-weight: 600; }
        .text-medium { font-size: 1.6em; font-weight: 500; }
        .text-small { font-size: 1.2em; font-weight: 400; }
        .text-tiny { font-size: 0.9em; font-weight: 300; }
        /* 前四页文字按比例放大 */
        .page1 .text-large { font-size: 3.2em; }
        .page1 .text-small { font-size: 1.4em; }
        .page2 .text-large, .page3 .text-large, .page4 .text-large { font-size: 3.0em; }
        .page2 .text-medium, .page3 .text-medium, .page4 .text-medium { font-size: 1.8em; }
        .page2 .text-small, .page3 .text-small, .page4 .text-small { font-size: 1.4em; }
        /* P1 封面样式 */
        .page1 .page-content { text-align: center; justify-content: center; }
        .page1 .title { margin-bottom: 30px; opacity: 0; animation: fadeIn 0.7s ease 0.3s forwards; }
        .page1 .subtitle { opacity: 0; animation: fadeIn 0.7s ease 0.5s forwards; }
        /* P2 总览数据 */
        .page2 .page-content { align-items: flex-start; }
        .page2 .year { align-self: flex-start; margin-bottom: 50px; }
        .page2 .stats { align-self: flex-start; display: flex; flex-direction: column; gap: 20px; }
        /* P3 消费类型对比 */
        .page3 .page-content { align-items: flex-start; }
        .page3 .year { position: absolute; top: 50px; left: 50px; }
        .page3 .comparison { margin-top: 120px; display: flex; flex-direction: column; gap: 40px; }
        .page3 .item { display: flex; flex-direction: column; gap: 10px; }
        /* P4 两人评分对比 */
        .page4 .page-content { align-items: flex-start; }
        .page4 .year { position: absolute; top: 50px; left: 50px; }
        .page4 .scores { margin-top: 120px; display: flex; flex-direction: column; gap: 30px; }
        /* P5-P6, P10-P11 图表页通用 */
        .chart-page .page-content { align-items: center; }
        .chart-page .chart-title { margin-bottom: 30px; text-align: center; }
        .chart-container { width: 100%; height: 400px; background: rgba(255,255,255,0.1); border-radius: 12px; }
        /* P7-P9 排名页通用 */
        .ranking-page .page-content { align-items: center; }
        .ranking-page .ranking-title { margin-bottom: 30px; text-align: center; }
        .ranking-list { width: 100%; max-height: 70vh; overflow-y: auto; -webkit-overflow-scrolling: touch; }
        .ranking-item { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); border-radius: 16px; padding: 15px 20px; margin: 10px 0; display: flex; align-items: center; justify-content: space-between; transition: transform 0.3s ease; }
        .ranking-item.parallax { will-change: transform; }
        .ranking-item .rank { font-family: "思源黑体", sans-serif; font-size: 1.8em; font-weight: 700; width: 40px; text-align: center; }
        /* 排名金银铜样式 */
        .ranking-item .rank-1 { color: #FFD700; }
        .ranking-item .rank-2 { color: #C0C0C0; }
        .ranking-item .rank-3 { color: #CD7F32; }
        .ranking-item .info { flex: 1; margin-left: 15px; }
        .ranking-item .name { font-size: 1.3em; font-weight: 500; white-space: normal; word-wrap: break-word; line-height: 1.4; }
        .ranking-item .score { font-family: "思源黑体", sans-serif; font-size: 1.1em; color: #ddd; text-align: right; }
        /* P9 性价比弹窗 */
        .card-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8); background: rgba(0,0,0,0.9); backdrop-filter: blur(20px); border-radius: 20px; padding: 30px; width: 80%; max-width: 400px; z-index: 100; opacity: 0; pointer-events: none; transition: all 0.3s ease; color: #fff; }
        .card-popup.active { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: auto; }
        .card-popup .close-btn { position: absolute; top: 15px; right: 15px; font-size: 1.5em; cursor: pointer; }
        .card-popup .content { line-height: 2; }
        /* P12 封底温柔样式 */
        .page12 .page-content { text-align: center; justify-content: center; gap: 20px; }
        .page12 .line { opacity: 0; animation: fadeInUp 0.8s ease forwards; }
        .page12 .line-1 { animation-delay: 0.5s; }
        .page12 .line-2 { animation-delay: 1.0s; }
        .page12 .line-3 { animation-delay: 1.5s; }
        .page12 .line-4 { animation-delay: 2.0s; }
        /* 通用动画 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* 自定义滚动条 - 适配手机 */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.3); border-radius: 10px; }
    </style>
</head>
<body>
    <!-- 点击播放蒙层 - 任意位置点击触发 -->
    <div id="playOverlay">点击任意位置开始播放</div>

    <div class="page-container">
        <!-- P1 封面 -->
        <section class="page1 active">
            <video class="video-bg" id="video1" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/v0369cg10004d6beab7og65pefsj2bmg.mp4" type="video/mp4">
            </video>
            <div class="page-content">
                <div class="title text-large">2025 餐厅评价年度报告</div>
                <div class="subtitle text-small">小琪小辞编</div>
            </div>
        </section>

        <!-- P2 总览数据 -->
        <section class="page2">
            <video class="video-bg" id="video2" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/454D5429-7873-43D1-8AFD-E74D42BB8A35_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="year text-large">2025</div>
                <div class="stats">
                    <div class="text-medium">评价餐厅数量 160</div>
                    <div class="text-medium">平均价格 114.9</div>
                    <div class="text-medium">平均评分 6.22</div>
                </div>
            </div>
        </section>

        <!-- P3 消费类型对比 -->
        <section class="page3">
            <video class="video-bg" id="video2" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/454D5429-7873-43D1-8AFD-E74D42BB8A35_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="year text-large">2025</div>
                <div class="comparison">
                    <div class="item">
                        <div class="text-medium">消费餐厅 108 家</div>
                        <div class="text-small">占比67.5% 均价 109.8・均分 6.43</div>
                    </div>
                    <div class="item">
                        <div class="text-medium">免费餐厅 52 家</div>
                        <div class="text-small">占比32.5% 均价 125.6・均分 5.79</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- P4 两人评分对比 -->
        <section class="page4">
            <video class="video-bg" id="video2" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/454D5429-7873-43D1-8AFD-E74D42BB8A35_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="year text-large">2025</div>
                <div class="scores">
                    <div class="text-medium">小琪 平均评分 6.15</div>
                    <div class="text-medium">小辞 平均评分 6.34</div>
                </div>
            </div>
        </section>

        <!-- P5 四维度分析 -->
        <section class="page5 chart-page">
            <video class="video-bg" id="video3" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/6C1DFA6B-28E0-4C0B-9388-8E939B33986F_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="chart-title text-medium">小琪小辞四维度评价对比</div>
                <div id="chart21" class="chart-container"></div>
            </div>
        </section>

        <!-- P6 评分分布 -->
        <section class="page6 chart-page">
            <video class="video-bg" id="video3" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/6C1DFA6B-28E0-4C0B-9388-8E939B33986F_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="chart-title text-medium">餐厅评分分布情况</div>
                <div id="chart22" class="chart-container"></div>
            </div>
        </section>

        <!-- P7 TOP15 餐厅排行榜 -->
        <section class="page7 ranking-page">
            <video class="video-bg" id="video4" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/D2EFCD8C-7CC5-4D2F-9812-5C939A5A12D4_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="ranking-title text-medium-large">2025 年 TOP15 餐厅排行榜</div>
                <div class="ranking-list">
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.1s both;"><span class="rank rank-1">1</span><div class="info"><div class="name">前海沿 青岛菜</div></div><div class="score">8.48 · 236</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.2s both;"><span class="rank rank-2">2</span><div class="info"><div class="name">青叶食堂</div></div><div class="score">7.83 · 138</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.3s both;"><span class="rank rank-3">3</span><div class="info"><div class="name">南昌米粉</div></div><div class="score">7.76 · 18</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.4s both;"><span class="rank">4</span><div class="info"><div class="name">大吉利潮汕牛肉火锅</div></div><div class="score">7.73 · 120</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.5s both;"><span class="rank">5</span><div class="info"><div class="name">群乐饭店</div></div><div class="score">7.70 · 115</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.6s both;"><span class="rank">6</span><div class="info"><div class="name">金家馅饼</div></div><div class="score">7.69 · 70</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.7s both;"><span class="rank">7</span><div class="info"><div class="name">香园茶社</div></div><div class="score">7.66 · 118</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.8s both;"><span class="rank">8</span><div class="info"><div class="name">喜鼎</div></div><div class="score">7.65 · 304</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.9s both;"><span class="rank">9</span><div class="info"><div class="name">餐厅名称很长需要换行显示的一家店</div></div><div class="score">7.60 · 150</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 1.0s both;"><span class="rank">10</span><div class="info"><div class="name">测试餐厅 10</div></div><div class="score">7.55 · 90</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 1.1s both;"><span class="rank">11</span><div class="info"><div class="name">测试餐厅 11</div></div><div class="score">7.50 · 85</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 1.2s both;"><span class="rank">12</span><div class="info"><div class="name">测试餐厅 12</div></div><div class="score">7.45 · 80</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 1.3s both;"><span class="rank">13</span><div class="info"><div class="name">测试餐厅 13</div></div><div class="score">7.40 · 75</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 1.4s both;"><span class="rank">14</span><div class="info"><div class="name">测试餐厅 14</div></div><div class="score">7.35 · 70</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 1.5s both;"><span class="rank">15</span><div class="info"><div class="name">测试餐厅 15</div></div><div class="score">7.30 · 65</div></div>
                </div>
            </div>
        </section>

        <!-- P8 BOT15 餐厅倒数榜 -->
        <section class="page8 ranking-page">
            <video class="video-bg" id="video4" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/D2EFCD8C-7CC5-4D2F-9812-5C939A5A12D4_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="ranking-title text-medium-large">2025 年 BOT15 餐厅排行榜</div>
                <div class="ranking-list">
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.1s both;"><span class="rank rank-1">1</span><div class="info"><div class="name">倒数第一餐厅</div></div><div class="score">3.00 · 50</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.2s both;"><span class="rank rank-2">2</span><div class="info"><div class="name">倒数第二餐厅</div></div><div class="score">3.50 · 60</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.3s both;"><span class="rank rank-3">3</span><div class="info"><div class="name">倒数第三餐厅</div></div><div class="score">4.00 · 70</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.4s both;"><span class="rank">4</span><div class="info"><div class="name">倒数第四餐厅</div></div><div class="score">4.20 · 80</div></div>
                    <div class="ranking-item parallax" style="animation: fadeInUp 0.5s ease 0.5s both;"><span class="rank">5</span><div class="info"><div class="name">倒数第五餐厅</div></div><div class="score">4.30 · 90</div></div>
                </div>
            </div>
        </section>

        <!-- P9 性价比 TOP10 -->
        <section class="page9 ranking-page">
            <video class="video-bg" id="video4" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/D2EFCD8C-7CC5-4D2F-9812-5C939A5A12D4_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="ranking-title text-medium-large">2025 年性价比 TOP10 餐厅</div>
                <div class="ranking-list">
                    <div class="ranking-item" data-details="总分合计：9.0，价格：20，性价比得分：4.5"><span class="rank rank-1">1</span><div class="info"><div class="name">性价比之王</div></div><div class="score">9.0 · 20</div></div>
                    <div class="ranking-item" data-details="总分合计：8.5，价格：30，性价比得分：2.83"><span class="rank rank-2">2</span><div class="info"><div class="name">性价比亚军</div></div><div class="score">8.5 · 30</div></div>
                    <div class="ranking-item" data-details="总分合计：8.0，价格：40，性价比得分：2.0"><span class="rank rank-3">3</span><div class="info"><div class="name">性价比季军</div></div><div class="score">8.0 · 40</div></div>
                    <div class="ranking-item" data-details="总分合计：7.8，价格：35，性价比得分：2.23"><span class="rank">4</span><div class="info"><div class="name">性价比第四名</div></div><div class="score">7.8 · 35</div></div>
                    <div class="ranking-item" data-details="总分合计：7.6，价格：38，性价比得分：2.0"><span class="rank">5</span><div class="info"><div class="name">性价比第五名</div></div><div class="score">7.6 · 38</div></div>
                </div>
            </div>
        </section>

        <!-- P10 月度消费趋势 -->
        <section class="page10 chart-page">
            <video class="video-bg" id="video5" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/FD0B7E9B-BF7D-46BB-9095-7EECB0D18A1F_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="chart-title text-medium">小琪小辞・月度消费趋势</div>
                <div id="chart23" class="chart-container"></div>
            </div>
        </section>

        <!-- P11 评分 × 消费类型交叉分析 -->
        <section class="page11 chart-page">
            <video class="video-bg" id="video5" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/FD0B7E9B-BF7D-46BB-9095-7EECB0D18A1F_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="chart-title text-medium">评分 × 消费交叉分析</div>
                <div id="chart24" class="chart-container"></div>
            </div>
        </section>

        <!-- P12 封底 -->
        <section class="page12">
            <video class="video-bg" id="video6" loop muted playsinline>
                <source src="https://pridech.github.io/diet20260228/F41009D9-BDF3-4113-8EB1-84C158D65CC3_meta.mov" type="video/quicktime">
            </video>
            <div class="page-content">
                <div class="line line-1 text-medium-large">幸福就是</div>
                <div class="line line-2 text-medium-large">在一起</div>
                <div class="line line-3 text-medium-large">吃很多很多很多顿饭</div>
                <div class="line line-4 text-medium-large">永远</div>
            </div>
        </section>
    </div>

    <!-- P9 性价比弹出卡片 -->
    <div class="card-popup" id="cardPopup">
        <div class="close-btn" id="closeCard">×</div>
        <div class="content" id="cardContent"></div>
    </div>

    <script>
        // 核心：点击任意位置触发视频播放 + 隐藏蒙层
        const playOverlay = document.getElementById('playOverlay');
        const allVideos = document.querySelectorAll('.video-bg');
        // 点击蒙层（页面任意位置）触发
        playOverlay.addEventListener('click', function() {
            // 隐藏蒙层
            playOverlay.style.display = 'none';
            // 播放所有背景视频并添加显示样式
            allVideos.forEach(video => {
                video.play().then(() => {
                    video.classList.add('played'); // 视频播放后显示（取消透明）
                }).catch(e => {
                    video.classList.add('played'); // 即使播放失败，也显示视频封面
                });
            });
        });

        // 页面翻页核心逻辑
        let currentPage = 0;
        const pages = document.querySelectorAll('section');
        const totalPages = pages.length;
        let isScrolling = false; // 防止滚动列表时误触翻页

        // 阻止内容滚动冒泡到翻页，解决滚动冲突
        document.querySelectorAll('.page-content').forEach(el => {
            el.addEventListener('touchmove', (e) => {
                e.stopPropagation();
            }, { passive: false });
            // 监听列表滚动状态，避免翻页误触
            el.addEventListener('scroll', () => {
                isScrolling = true;
                clearTimeout(window.scrollEndTimer);
                window.scrollEndTimer = setTimeout(() => {
                    isScrolling = false;
                }, 100);
            });
        });

        // 滑动翻页：仅保留下滑下一页、上滑上一页，取消点击翻页
        let startY = 0;
        document.addEventListener('touchstart', (e) => {
            if (isScrolling) return;
            startY = e.touches[0].clientY;
        });
        document.addEventListener('touchend', (e) => {
            if (isScrolling) return;
            const endY = e.changedTouches[0].clientY;
            const deltaY = startY - endY;
            // 下滑翻下一页（滑动距离>50触发，防止误触）
            if (deltaY > 50 && currentPage < totalPages - 1) {
                pages[currentPage].classList.remove('active');
                currentPage++;
                pages[currentPage].classList.add('active');
                initParallax(); // 触发当前页视差效果
            }
            // 上滑翻上一页
            else if (deltaY < -50 && currentPage > 0) {
                pages[currentPage].classList.remove('active');
                currentPage--;
                pages[currentPage].classList.add('active');
                initParallax(); // 触发当前页视差效果
            }
        });

        // P7/P8 排名页滑动视差偏移效果
        function initParallax() {
            const currentRankingPage = pages[currentPage];
            const parallaxItems = currentRankingPage.querySelectorAll('.parallax');
            if (parallaxItems.length > 0) {
                let lastScrollTop = 0;
                const rankingList = currentRankingPage.querySelector('.ranking-list');
                rankingList.addEventListener('scroll', () => {
                    const scrollTop = rankingList.scrollTop;
                    const direction = scrollTop > lastScrollTop ? 1 : -1;
                    lastScrollTop = scrollTop;
                    // 视差偏移计算，营造高级滑动效果
                    parallaxItems.forEach((item, index) => {
                        const offset = (index * 5 + scrollTop * 0.05) * direction;
                        item.style.transform = `translateY(${offset}px)`;
                    });
                });
            }
        }

        // P9 性价比榜单点击弹出小卡片功能
        const cardPopup = document.getElementById('cardPopup');
        const cardContent = document.getElementById('cardContent');
        const closeCard = document.getElementById('closeCard');
        // 点击榜单项弹出卡片
        document.querySelectorAll('.page9 .ranking-item').forEach(item => {
            item.addEventListener('click', () => {
                const details = item.getAttribute('data-details');
                cardContent.textContent = details;
                cardPopup.classList.add('active');
            });
        });
        // 关闭卡片（点击叉号/卡片外部）
        closeCard.addEventListener('click', () => cardPopup.classList.remove('active'));
        cardPopup.addEventListener('click', (e) => {
            if (e.target === cardPopup) cardPopup.classList.remove('active');
        });

        // 初始化 chart2.1（按你提供的Python代码精准还原，适配深色背景）
        const chart21 = echarts.init(document.getElementById('chart21'));
        const option21 = {
            backgroundColor: 'transparent',
            textStyle: { color: '#fff' },
            xAxis: {
                type: 'category',
                data: ["菜品", "环境", "服务", "性价比"],
                name: "评分维度",
                nameLocation: "middle",
                nameGap: 25,
                nameTextStyle: { color: "#fff", fontSize: 10 },
                axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 10 },
                splitLine: { show: false }
            },
            yAxis: {
                type: 'value',
                name: "平均分",
                nameLocation: "middle",
                nameGap: 40,
                min: 5.0,
                max: 6.6,
                interval: 0.2,
                nameTextStyle: { color: "#fff", fontSize: 10 },
                axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 9, formatter: "{value}" },
                splitLine: { lineStyle: { color: 'rgba(255,255,255,0.2)', type: "dashed" } }
            },
            series: [
                {
                    name: '小琪',
                    type: 'bar',
                    data: [6.33, 5.87, 5.78, 5.51],
                    itemStyle: { color: 'rgba(74, 120, 194, 0.8)', borderColor: "#3A5F98", borderWidth: 2 },
                    barGap: '20%'
                },
                {
                    name: '小辞',
                    type: 'bar',
                    data: [6.51, 6.14, 6.06, 5.70],
                    itemStyle: { color: 'rgba(141, 211, 95, 0.8)', borderColor: "#75B84D", borderWidth: 2 }
                },
                {
                    name: '整体',
                    type: 'bar',
                    data: [6.42, 6.01, 5.92, 5.61],
                    itemStyle: { color: 'rgba(240, 184, 110, 0.8)', borderColor: "#E09F4B", borderWidth: 2 }
                }
            ],
            legend: {
                data: ['小琪', '小辞', '整体'],
                left: "center",
                top: "10px",
                orient: "horizontal",
                itemGap: 20,
                textStyle: { color: 'rgba(255,255,255,0.8)', fontSize: 11 }
            },
            tooltip: {
                trigger: 'axis',
                backgroundColor: 'rgba(0,0,0,0.7)',
                textStyle: { color: '#fff', fontSize: 10 },
                formatter: "{b}<br/>{a}：{c}"
            },
            dataZoom: [{ type: "inside", rangeStart: 0, rangeEnd: 100 }],
            toolbox: {
                show: true,
                left: "center",
                top: "50px",
                itemSize: 16,
                feature: {
                    saveAsImage: {},
                    magicType: { type: ["line", "bar"] }
                },
                iconStyle: { color: 'rgba(255,255,255,0.8)' }
            }
        };
        chart21.setOption(option21);

        // 初始化 chart2.2 评分分布（预留容器，适配深色背景）
        const chart22 = echarts.init(document.getElementById('chart22'));
        chart22.setOption({
            backgroundColor: 'transparent',
            textStyle: { color: '#fff' },
            tooltip: { trigger: 'item', backgroundColor: 'rgba(0,0,0,0.7)', textStyle: { color: '#fff' } },
            legend: { 
                data: ['5分以下', '5-6分', '6-7分', '7分以上'],
                textStyle: { color: 'rgba(255,255,255,0.8)' },
                left: 'center',
                top: '10px'
            },
            series: [{
                type: 'pie',
                radius: ['40%', '70%'],
                data: [
                    { value: 15, name: '5分以下' },
                    { value: 35, name: '5-6分' },
                    { value: 40, name: '6-7分' },
                    { value: 10, name: '7分以上' }
                ],
                itemStyle: {
                    color: function(params) {
                        const colorList = ['#F06292', '#FFB74D', '#81C784', '#64B5F6'];
                        return colorList[params.dataIndex];
                    }
                },
                label: { color: 'rgba(255,255,255,0.9)' }
            }]
        });

        // 初始化 chart2.3 月度消费趋势（双Y轴精准还原，适配深色背景）
        const chart23 = echarts.init(document.getElementById('chart23'));
        chart23.setOption({
            backgroundColor: 'transparent',
            textStyle: { color: '#fff' },
            tooltip: {
                trigger: 'axis',
                backgroundColor: 'rgba(0,0,0,0.7)',
                textStyle: { color: '#fff', fontSize: 10 }
            },
            legend: {
                data: ['平均价格(元)', '评价餐厅数', '平均总分'],
                left: "center",
                top: "10px",
                orient: "horizontal",
                itemGap: 15,
                textStyle: { color: 'rgba(255,255,255,0.8)', fontSize: 10 }
            },
            xAxis: {
                type: 'category',
                data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 9 },
                splitLine: { show: false }
            },
            yAxis: [
                {
                    type: 'value',
                    name: '分数/餐厅数',
                    min: 0,
                    max: 30,
                    interval: 5,
                    nameTextStyle: { color: "#fff", fontSize: 10 },
                    axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                    axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 9 },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.2)', type: "dashed" } }
                },
                {
                    type: 'value',
                    name: '价格(元)',
                    min: 80,
                    max: 150,
                    interval: 10,
                    nameTextStyle: { color: "#fff", fontSize: 10 },
                    axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                    axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 9 },
                    splitLine: { show: false }
                }
            ],
            series: [
                {
                    name: '平均价格(元)',
                    type: 'line',
                    data: [90.44, 128.59, 112.65, 131.97, 126.62, 134.02, 150, 142, 84.02, 103.07, 101.13, 110.62],
                    yAxisIndex: 1,
                    itemStyle: { color: "#F06292" },
                    lineStyle: { width: 3 },
                    symbolSize: 8,
                    symbol: 'circle'
                },
                {
                    name: '评价餐厅数',
                    type: 'line',
                    data: [9, 9, 11, 17, 13, 9, 10, 12, 12, 15, 15, 24],
                    yAxisIndex: 0,
                    itemStyle: { color: "#81C784" },
                    lineStyle: { width: 3 },
                    symbolSize: 8,
                    symbol: 'circle'
                },
                {
                    name: '平均总分',
                    type: 'line',
                    data: [6.73, 6.34, 5.96, 6.41, 5.91, 6.09, 5.97, 6.06, 6.22, 6.21, 6.35, 6.39],
                    yAxisIndex: 0,
                    itemStyle: { color: "#64B5F6" },
                    lineStyle: { width: 3 },
                    symbolSize: 8,
                    symbol: 'circle'
                }
            ],
            dataZoom: [{ type: "inside", rangeStart: 0, rangeEnd: 100 }]
        });

        // 初始化 chart2.4 评分×消费交叉分析（预留容器，适配深色背景）
        const chart24 = echarts.init(document.getElementById('chart24'));
        chart24.setOption({
            backgroundColor: 'transparent',
            textStyle: { color: '#fff' },
            tooltip: {
                trigger: 'axis',
                backgroundColor: 'rgba(0,0,0,0.7)',
                textStyle: { color: '#fff', fontSize: 10 }
            },
            legend: {
                data: ['消费餐厅', '免费餐厅'],
                left: "center",
                top: "10px",
                textStyle: { color: 'rgba(255,255,255,0.8)', fontSize: 11 }
            },
            xAxis: {
                type: 'category',
                data: ['5分以下', '5-6分', '6-7分', '7分以上'],
                axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 10 }
            },
            yAxis: {
                type: 'value',
                name: '餐厅数量',
                nameTextStyle: { color: "#fff", fontSize: 10 },
                axisLine: { lineStyle: { color: 'rgba(255,255,255,0.5)' } },
                axisLabel: { color: 'rgba(255,255,255,0.8)', fontSize: 9 },
                splitLine: { lineStyle: { color: 'rgba(255,255,255,0.2)', type: "dashed" } }
            },
            series: [
                {
                    name: '消费餐厅',
                    type: 'bar',
                    data: [5, 20, 75, 8],
                    itemStyle: { color: 'rgba(74, 120, 194, 0.8)' },
                    barGap: '20%'
                },
                {
                    name: '免费餐厅',
                    type: 'bar',
                    data: [10, 15, 25, 2],
                    itemStyle: { color: 'rgba(141, 211, 95, 0.8)' }
                }
            ]
        });

        // 图表响应式：适配手机屏幕大小变化
        window.addEventListener('resize', () => {
            chart21.resize();
            chart22.resize();
            chart23.resize();
            chart24.resize();
        });
    </script>
</body>
</html>
